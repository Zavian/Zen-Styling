/* Workspace Name Customization */
.zen-current-workspace-indicator-icon { scale: 1.3; }
.zen-current-workspace-indicator-name { font-size: 1.5rem !important; }

/* Top Bar Customization */
#zen-appcontent-navbar-wrapper {
	padding-bottom: 2px!important;
}

/* History Panel */
#PanelUI-history {
	height: 500px !important;
}



/* Tab Customization */
#tabbrowser-tabs[orient="vertical"] {
	& .tab-content { padding: 1rem; }
	.tab-text.tab-label { font-size: 1.3rem; }
	.tab-icon-stack { scale: 1.1; }

	.tabbrowser-tab.tabbrowser-tab.tabbrowser-tab {

		/* Unloaded tabs dimmed */
		&[pending="true"]:not([zen-essential="true"]) .tab-content {
			opacity: 0.4;
		}

		/* Selected tabs that aren't the square essentials */
		&[selected]:not([zen-essential="true"]) .tab-background {
			border: 1px solid rgba(from var(--color-accent-primary) r g b / 75%) !important;
			background-color: rgba(from Canvas r g b / 60%);
		}
	}
}

/* Find bar customization */
findbar {
	/* To prevent some weird coloring from theme */
	--zen-primary-color: #180d14;

	.findbar-container {
		padding: 1em;
		margin: 0;
	}

	.findbar-textbox {
		font-size: 1.5em;
		padding: 0.7rem
	}

	.findbar-textbox:focus {
		--toolbar-field-focus-background-color: rgba(from white r g b / 10%);
		border-color: rgba( from var(--color-accent-primary) r g b / 15%);
	}
}


/* Main view customization */
#zen-tabbox-wrapper { box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.3); }
.browserSidebarContainer { outline: 1px solid rgba( from var(--color-accent-primary) r g b / 30%); }


/* https://github.com/Tanay-Kar/Zen-Themes/blob/main/LoadBar/chrome.css - trying to make it work with the entire zen with more than one toolbar */
@-moz-document url-prefix("chrome:") {
	#tabbrowser-tabbox::before {
		content: "" !important;
		position: absolute !important;
		top: 0px !important; /* This will get overriden if the toolbar is showing */
		left: 0px !important;
		height: 4px !important; /* Height of the top background */
		max-width: 100% !important;
		width: var(--bar-pcent) !important; /* Ensure full width or customizable width */
		background-color: var(--bar-colour) !important; /* Solid color for the bar */
		filter: drop-shadow(0px 0px 10px black) !important;
		border-radius: 0 2px 2px 0 !important;
		@media (-moz-bool-pref: "uc.loadbar.no-rounded-corner") {
			border-radius: 0 !important; /* Adjust this value to control the roundness of the ends */
		}
		z-index: 1 !important;
		/* Apply smooth transition on width, top and background */
		transition: width 0.5s ease-in-out, top 0.1s ease-in-out, background 0.2s ease !important;
	}
	
	/* When the toolbar is permanently showing, we move the loading bar under it */
	@media not (-moz-bool-pref: "zen.view.compact.hide-toolbar") and not (-moz-bool-pref: "zen.view.use-single-toolbar") {
		#tabbrowser-tabbox::before {
			top: 40px !important;
		}
	}
	
	#tabbrowser-tabbox:has([zen-glance-selected])::before,
	#tabbrowser-tabbox.zen-glance-overlay::before {
		max-width: calc(85%) !important;
		left: calc(15%/2) !important;
		border-radius: 6px !important;
	}
	
	#tabbrowser-tabbox.zen-glance-background::before {
		background: transparent !important;
		height: 0px !important;
	}
	
	:root {
		&:has(.tabbrowser-tab[selected][busy]) {
			--bar-colour: light-dark(var(--zen-primary-color), hsl(from var(--zen-primary-color) h s calc(l + 35)));
			--bar-pcent: 15%;
		}
		&:has(.tabbrowser-tab[selected][busy][pendingicon]) {
			--bar-colour: light-dark(var(--zen-primary-color), hsl(from var(--zen-primary-color) h s calc(l + 35)));
			--bar-pcent: 45%;
		}
		&:has(.tabbrowser-tab[selected][busy][pendingicon][progress]) {
			--bar-colour: light-dark(var(--zen-primary-color), hsl(from var(--zen-primary-color) h s calc(l + 35)));
			--bar-pcent: 85%;
		}
		&:has(.tabbrowser-tab[selected][busy][progress]) {
			--bar-colour: light-dark(var(--zen-primary-color), hsl(from var(--zen-primary-color) h s calc(l + 35)));
			--bar-pcent: 95%;
		}
		&:has(.tabbrowser-tab[selected][muted]:not([busy])) {
			--bar-colour: orangered;
			--bar-pcent: 100%;
			
			#tabbrowser-tabbox::before {
				border-radius: 0;
			}
		}
	}
	
	/* 
	When we are in compact mode, but not in single-toolbar mode,
	we want to move the loading bar under the toolbar if it is currently showing.
	
	This uses the conditionals found in /src/zen/compact-mode/zen-compact-mode.css
	to detect if the toolbar is showing.
	*/
	@media (-moz-bool-pref: "zen.view.compact.hide-toolbar") {
		:root:not([zen-single-toolbar='true']):has([zen-compact-mode='true']) {
			&:has(#zen-appcontent-navbar-wrapper[zen-has-hover]),
			&:has(#zen-appcontent-navbar-wrapper[zen-user-show]),
			&:has(#zen-appcontent-navbar-wrapper[has-popup-menu]),
			&:has(*:is(#zen-appcontent-navbar-wrapper[panelopen='true'], 
			#zen-appcontent-navbar-wrapper[open='true'], 
			#urlbar:focus-within:not(#urlbar[zen-floating-urlbar='true']), 
			#zen-appcontent-navbar-wrapper[breakout-extend='true'])
			:not(.zen-compact-mode-ignore)
			) {
				#tabbrowser-tabbox::before {
					top: 39px !important;
				}
			}
		}
	}
}